"use strict";(self.webpackChunkinsiderstodo=self.webpackChunkinsiderstodo||[]).push([[664],{664:(e,t,l)=>{l.r(t),l.d(t,{default:()=>x});var n=l(43),s=l(706),i=l(87),d=l(379),o=l(472),a=l(15);var r=l(579);const c=e=>{let{id:t,title:l,active:d}=e;const o=(0,n.useRef)(null),[a,c]=(0,n.useState)(!1),u=(0,s.j)();return(0,r.jsxs)("li",{className:"\n        border-[#5B8FB9]\n        border \n        rounded-lg \n        p-2 \n        text-white \n        hover:bg-[#5B8FB9] \n        hover:cursor-pointer\n        transition \n        duration-300 \n        ease-in-out\n        ".concat(d?"bg-[#5B8FB9]":void 0,"\n    "),onClick:()=>u(i.D.setActiveTable(t)),onDoubleClick:()=>c(!0),onMouseLeave:()=>a&&c(!1),children:[!a&&(0,r.jsx)("p",{children:l}),a&&(0,r.jsx)("form",{onSubmit:e=>{e.preventDefault(),o.current&&u(i.D.editTable({id:t,newTitle:o.current.value})),c(!1)},children:(0,r.jsx)("input",{ref:o,className:"bg-transparent rounded-lg w-full outline-none border-2 size-full px-2",defaultValue:l})})]})};var u=l(739);const h=e=>{let{id:t,title:l,completed:i}=e;const d=(0,n.useRef)(null),[o,a]=(0,n.useState)(!1),c=(0,s.j)(),h=""===l;return(0,r.jsxs)("div",{className:"grid grid-cols-12 p-4 border border-black rounded-md",children:[(0,r.jsxs)("div",{className:"flex gap-2 col-span-11",children:[(0,r.jsx)("input",{type:"checkbox",checked:i,onChange:()=>{c(u.z.editTodoStatus(t))},className:"size-6"}),(0,r.jsxs)("div",{className:"w-full",onDoubleClick:()=>a(!0),onMouseLeave:()=>o&&a(!1),children:[!o&&!h&&(0,r.jsx)("h3",{children:l}),(o||h)&&(0,r.jsx)("form",{onSubmit:e=>{e.preventDefault(),d.current&&c(u.z.editTodo({id:t,title:d.current.value})),a(!1)},children:(0,r.jsx)("input",{type:"text",defaultValue:l,ref:d,className:"bg-transparent rounded-lg w-full outline-none border-2 size-full px-2"})})]})]}),(0,r.jsx)("div",{className:"block grid-cols-1",children:(0,r.jsx)("button",{className:"text-red-600 uppercase",onClick:()=>{c(u.z.removeTodo(t))},children:"Delete"})})]})};var b=l(457);const p=()=>{const e=(0,s.G)((e=>e.todos)),{activeTable:t}=(0,s.G)((e=>e.tables)),l=(0,s.j)();return(0,n.useEffect)((()=>{t&&(async e=>{const t=(0,o.P)((0,o.rJ)(a.db,"Todo"),(0,o._M)("TableId","==",e)),l=await(0,o.GG)(t);if(!l.empty)return l.docs.map((e=>(0,d.A)({id:e.id},e.data())));console.log("No document found with tableId:",e)})(t.id).then((e=>{const t=[...e.map((e=>({id:parseInt(e.Id),title:e.Title,tableId:e.TableId,completed:e.Completed})))];l(u.z.setTodos([...t]))}))}),[t]),(0,r.jsxs)("div",{className:"block border border-black h-full-height-with-paddings pt-5 overflow-y-auto px-3",children:[(0,r.jsx)("h1",{className:"text-6xl font-semibold text-center",children:null===t||void 0===t?void 0:t.title}),(0,r.jsx)("button",{className:"\n                block\n                p-4\n                bg-[#03001C]\n                text-white\n                rounded-lg\n                hover:bg-[#301E67]\n                transition \n                duration-300 \n                ease-in-out\n                mt-3\n                mx-auto\n            ",onClick:()=>{t&&l(u.z.addTodo({id:b.a.number.int(),title:"",completed:!1,tableId:t.id}))},children:"Create a task"}),(0,r.jsx)("div",{className:"flex flex-col gap-4 mt-3",children:e.map((e=>(0,r.jsx)(h,{title:e.title,id:e.id,completed:e.completed},e.id)))})]})},x=()=>{const{activeTable:e,tables:t}=(0,s.G)((e=>e.tables)),l=(0,s.j)();(0,n.useEffect)((()=>{(async()=>{const e=(0,o.P)((0,o.rJ)(a.db,"Table")),t=await(0,o.GG)(e);if(!t.empty)return t.docs.map((e=>(0,d.A)({},e.data())));console.log("No document found")})().then((e=>{e&&e.forEach((e=>{l(i.D.addTable({id:e.Id,title:e.Title}))}))}))}),[]);return(0,r.jsx)("section",{className:"w-full min-h-full-height",children:(0,r.jsxs)("div",{className:"grid grid-cols-12 gap-x-4",children:[(0,r.jsxs)("div",{className:"sticky top-[64px] block col-span-4 bg-[#301E67] h-full-height",children:[(0,r.jsx)("h4",{className:"block pt-4 px-4 text-white",children:"\u0421\u043f\u0438\u0441\u043e\u043a \u0442\u0430\u0431\u043b\u0438\u0446\u044c"}),(0,r.jsxs)("ul",{className:"flex flex-col gap-4 px-4 pt-4 list-none",children:[t.map((t=>(0,r.jsx)(c,{active:e&&e.id===t.id,id:t.id,title:t.title},t.id))),(0,r.jsx)("li",{className:"\n                        border-[#5B8FB9]\n                        border \n                        rounded-lg \n                        p-2 \n                        text-white \n                        hover:bg-[#5B8FB9] \n                        hover:cursor-pointer\n                        transition \n                        duration-300 \n                        ease-in-out\n                    ",onClick:()=>{l(i.D.addTable({id:t.length+1,title:"Table"+(t.length+1)}))},children:"\u0421\u0442\u0432\u043e\u0440\u0438\u0442\u0438 \u0442\u0430\u0431\u043b\u0438\u0446\u044e"})]})]}),(0,r.jsx)("div",{className:"col-span-8 p-4",children:null!==e&&(0,r.jsx)("div",{className:"block px-2",children:(0,r.jsx)(p,{})})})]})})}}}]);
//# sourceMappingURL=664.a9397529.chunk.js.map